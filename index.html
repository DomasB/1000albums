<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>1000 albums challange</title>
    <style media="screen">
      #app {
        max-width:1500px;
        margin:0 auto;
      }
      .artist-image {
        display:inline-block;
        width:300px;
        height:300px;
        vertical-align: top;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>
<script type="text/javascript">
  let data;
  document.addEventListener('scroll', (e) => {
    let windowHeight = document.getElementById('app').getBoundingClientRect().height;
    let scrollHeight = window.scrollY;
    if (windowHeight - scrollHeight < 500) {
      let dataToDraw = data.slice(0,40);
      data = data.slice(40)
      drawImage(dataToDraw);
    }
  })
  fetch('data.json')
  .then(r => r.json())
  .then(r => {
    data = r.slice(40);
    drawImage(r.slice(0,40));
  })
  const drawImage = (imageArray) => {
    imageArray.map(image => {
      let image = document.createElement('img');
      image.src = r[i].artist_image;
      image.classList.add("artist-image");
      document.getElementById('app').appendChild(image);
    })
  }

</script>
  </body>
</html>
